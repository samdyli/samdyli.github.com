---
title: 百万流量抽奖系统设计与实现
---



# {{page.title}}

------

大纲：

[TOC]

### 业务介绍： 

抽奖：活动，奖品，奖品库存，奖品概率，活动状态
抢购，抢红包，秒杀


业务分为：后台管理系统、抽奖和奖品发放
还有把抽奖分为抽奖和抽奖状态查询。 

抽奖状态实时性分为：实时和非实时。

抽奖 vs 优惠券



抽奖服务：高并发， 高可用，隔离性，低耦合，防刷

防止刷新：

防恶意注册用户

防恶意调用接口

防奖品被少部分人获取

防用户误操作



### 抽奖技术设计

#### 抽奖逻辑
#### 活动信息预加载

### 负债均衡层限流
#### 防止用户重复抽奖

#### 开奖完成后提前拦截流量

#### 奖品超发(超卖问题)

锁

- 乐观锁
- 悲观锁

同步队列

缓存+异步



#### 奖品预加载

#### 支持活动期间库存修改



#### 中奖流程优化

#### 中奖库存校验流程后置

#### 放弃重试



#### 部署优化方案

设计两套系统系统。







#### 奖品分发服务

#### 抽奖系统前端优化





#### 抽奖系统存储设计

###奖品发放

消息队列三大功能：解耦， 异步和肖峰









参考：
1. [如何设计一个百万级用户的抽奖系统？](https://juejin.im/post/5ce3f003f265da1bbd4b4946)

2. [如何设计一个高性能可扩展的抽奖系统](http://www.bugjc.com/blog/如何设计一个高性能可扩展的抽奖系统/)

3. [开源抽奖系统](https://cloud.tencent.com/developer/article/1386143)

4. [抽奖活动的高可用、高并发优化](https://yq.aliyun.com/articles/592271)

5. [阿里云服务器 如何处理网站高并发流量问题?含教程](https://yq.aliyun.com/articles/696140?spm=a2c4e.11153940.0.0.177f334870iYuo&source=5176.11533457&userCode=ffsbbyn0)
